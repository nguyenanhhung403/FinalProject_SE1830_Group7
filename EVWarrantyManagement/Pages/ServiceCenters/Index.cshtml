@page
@model EVWarrantyManagement.Pages.ServiceCenters.IndexModel
@{
    ViewData["Title"] = "Service Centers";
}

<nav aria-label="breadcrumb" class="mb-2">
    <ol class="breadcrumb mb-0">
        <li class="breadcrumb-item"><a asp-page="/Index"><i class="bi bi-house me-1"></i>Dashboard</a></li>
        <li class="breadcrumb-item active" aria-current="page">Service Centers</li>
    </ol>
</nav>

<div class="d-flex justify-content-between align-items-center mb-2">
    <div>
        <h2 class="mb-0" style="font-size: 1.5rem;">
            <i class="bi bi-building me-2"></i>Service Centers
        </h2>
        <p class="text-muted mb-0 small">Manage service centers and technicians</p>
    </div>
    @if (User.IsInRole("Admin"))
    {
        <a class="btn btn-sm btn-primary" asp-page="Create">
            <i class="bi bi-plus-circle me-1"></i> New Service Center
        </a>
    }
</div>

@if (TempData["Success"] is string sMsg)
{
    <div class="alert alert-success alert-dismissible fade show py-2 mb-2" role="alert">
        <i class="bi bi-check-circle me-2"></i><small>@sMsg</small>
        <button type="button" class="btn-close btn-close-sm" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}
@if (TempData["Error"] is string eMsg)
{
    <div class="alert alert-danger alert-dismissible fade show py-2 mb-2" role="alert">
        <i class="bi bi-exclamation-triangle me-2"></i><small>@eMsg</small>
        <button type="button" class="btn-close btn-close-sm" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

<div class="table-responsive" style="max-height: calc(100vh - 280px); overflow-y: auto;">
    <table class="table table-striped table-sm align-middle mb-0">
        <thead class="table-light sticky-top" style="top: 0; z-index: 10;">
            <tr>
                <th class="py-2" style="font-size: 0.875rem;">Name</th>
                <th class="py-2" style="font-size: 0.875rem;">Address</th>
                <th class="py-2" style="font-size: 0.875rem;">Contact</th>
                <th class="py-2" style="font-size: 0.875rem;">Actions</th>
            </tr>
        </thead>
        <tbody>
        @foreach (var sc in Model.ServiceCenters)
        {
            <tr>
                <td class="py-1">
                    <strong style="font-size: 0.9rem;">@sc.Name</strong>
                </td>
                <td class="py-1" style="font-size: 0.875rem;">@(sc.Address ?? "N/A")</td>
                <td class="py-1" style="font-size: 0.875rem;">
                    @if (!string.IsNullOrEmpty(sc.ContactName))
                    {
                        <div>@sc.ContactName</div>
                    }
                    @if (!string.IsNullOrEmpty(sc.ContactPhone))
                    {
                        <small class="text-muted">@sc.ContactPhone</small>
                    }
                </td>
                <td class="py-1 text-nowrap">
                    <a class="btn btn-xs btn-outline-primary" asp-page="Details" asp-route-id="@sc.ServiceCenterId" style="font-size: 0.75rem; padding: 0.2rem 0.5rem;">
                        <i class="bi bi-eye"></i> Details
                    </a>
                    @if (User.IsInRole("Admin"))
                    {
                        <a class="btn btn-xs btn-outline-secondary" asp-page="Edit" asp-route-id="@sc.ServiceCenterId" style="font-size: 0.75rem; padding: 0.2rem 0.5rem; margin-left: 0.25rem;">
                            <i class="bi bi-pencil"></i> Edit
                        </a>
                    }
                </td>
            </tr>
        }
        </tbody>
    </table>
</div>

